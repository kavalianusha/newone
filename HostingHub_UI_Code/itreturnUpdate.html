<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>updateHostingForm</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="itreturnUpdate.css">
</head>
<body>

  <div class="top-navbar">
     
      <div class="logo">
          <img src="https://pathbreakertech.com/uploads/settings/general_settings_1675415847_112573057.png" alt="PathBreaker Logo">
      </div>
      <h1 style="height: 20px; margin-right: 450px; text-align: center;">Hosting Hub Dashboard</h1>
      <!-- <h1 class="dashboard-title">Hosting Hub Dashboard</h1> -->
  
      <div class="dropdown-menu">
        <a  id="logout" class="dropdown-item" href="#">
          <img src="https://icons.veryicon.com/png/o/internet--web/website-icons/logout-8.png" alt="Logout Icon">
            <span>Log Out</span>
            <i class="fa fa-sign-out"></i>
        </a>
    </div>
  </div>
    <div class="left-navbar">
        <div class="container">
            <aside class="sidebar">
              <ul>
                <!-- <li class="has-submenu">
                    <a href="#">ADMIN</a>
                    <ul class="submenu">
                      <li><a href="adminAdd.html">Register</a></li>
                      <li><a href="adminView.html">View</a></li>
                    </ul>
                  </li> -->
                  <li class="has-submenu">
                    <a href="#">DOMAIN</a>
                    <ul class="submenu">
                      <li><a href="domainAdd.html">Register</a></li>
                      <li><a href="domainView.html">View</a></li>
                    </ul>
                  </li>
                  <li class="has-submenu">
                    <a href="#">HOSTING</a>
                    <ul class="submenu">
                      <li><a href="hostingAdd.html">Register</a></li>
                      <li><a href="hostingView.html">View</a></li>
                    </ul>
                  </li>
                <li class="has-submenu">
                  <a href="#">HOSTDOMAIN MAP</a>
                  <ul class="submenu">
                    <li><a href="mappingAdd.html">Register</a></li>
                    <li><a href="mappingView.html">View</a></li>
                  </ul>
                </li>
                <!-- <li class="has-submenu">
                  <a href="#">EMAIL</a>
                  <ul class="submenu">
                    <li><a href="emailAdd.html">Register</a></li>
                    <li><a href="emailView.html">View</a></li>
                  </ul>
                </li> -->
                <li class="has-submenu">
                    <a href="#">IT RETURNS</a>
                    <ul class="submenu">
                      <li><a href="itreturnsadd.html">Register</a></li>
                      <li><a href="itreturnsView.html">View</a></li>
                    </ul>
                  </li>
            </ul>
          </div>
          </div>
          <div id="updatePopup1" class="popup1">
            <span id="updatePopupMessage1">Do you really want to logout?</span>
            <button id="updateYesButton1">Yes</button>
            <button id="updateNoButton1">No</button>
        </div>
        
        <script>
        document.addEventListener('DOMContentLoaded', function () {
        // When the "Log Out" link is clicked
        document.getElementById('logout').addEventListener('click', function() {
            console.log('Log Out link clicked'); // Log to the console
            document.getElementById('updatePopup1').style.display = 'block'; // Show the popup
        });
        
        // When the "Yes" button in the popup is clicked
        document.getElementById('updateYesButton1').addEventListener('click', function() {
            console.log('Yes button clicked'); // Log to the console
            // Redirect to login.html
            window.location.href = 'login.html';
        });
        
        // When the "No" button in the popup is clicked
        document.getElementById('updateNoButton1').addEventListener('click', function() {
            console.log('No button clicked'); // Log to the console
            document.getElementById('updatePopup1').style.display = 'none'; // Hide the popup
        });
        });
        
        </script>
      <div class="updated-content">
          <h1>Update It Returns</h1>
          <form id="updateITReturnsForm">
            <div class="form-column">
                <div class="form-field">
                    <label for="serviceType">Service Type:</label>
                    <input type="text" id="serviceType" name="serviceType" placeholder="Enter Service Type" required>
                    <label for="registeredEmail">Registered Email:</label>
                    <input type="email" id="registeredEmail" name="registeredEmail" placeholder="Enter Registered Email" required>
                    <label for="registeredMobileNo">Registered Mobile No:</label>
                    <input type="tel" id="registeredMobileNo" name="registeredMobileNo" placeholder="Enter Registered Mobile No" required>
                    <label for="registeredDate">Registered Date:</label>
                    <input type="date" id="registeredDate" name="registeredDate" required>
                </div>
                <div class="form-field2">
                    <label for="loginUrl">Login URL:</label>
                    <input type="text" id="loginUrl" name="loginUrl" placeholder="Enter Login URL" required>
                    <label for="userName">User Name:</label>
                    <input type="text" id="userName" name="userName" placeholder="Enter User Name" required>
                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password" placeholder="Enter Password" required>
                    <label for="createdBy">Created By:</label>
                    <input type="text" id="createdBy" name="createdBy" placeholder="Enter Created By" required>
                </div>
                <div  class="cross-symbol">
                        <a href="itreturnsView.html">
                          <img src="https://img.freepik.com/free-psd/x-symbol-isolated_23-2150500369.jpg?w=740&t=st=1699280425~exp=1699281025~hmac=ba4e60ee49cc0a9c7ee9f904c0f23860ce0452d23a7b7ebbb474a77002de99ae" alt="Cross Symbol">
                      </a>
                    </div>
                </div>
                  <center><input type="submit" value="Update"></center>
            </div>
        </form>
        <div id="updatePopup" class="popup">
          <span id="updatePopupMessage">Do you really want to update?</span>
          <button id="updateYesButton">Yes</button>
          <button id="updateNoButton">No</button>
        </div>
    <div id="popup">
      <span id="popupMessage"></span>
      <button id="okButton">OK</button>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
        var urlParams = new URLSearchParams(window.location.search);
        var customerId = urlParams.get('customerId');
        // Fetch existing IT Returns data
        fetch(`http://localhost:8090/api/itreturns/${customerId}`)
            .then(response => response.json())
            .then(data => {
                // Populate form fields with existing data
                document.getElementById('serviceType').value = data.serviceType;
                document.getElementById('registeredEmail').value = data.registeredEmail;
                document.getElementById('registeredMobileNo').value = data.registeredMobileNo;
                document.getElementById('registeredDate').value = data.registeredDate;
                document.getElementById('loginUrl').value = data.loginUrl;
                document.getElementById('userName').value = data.userName;
                document.getElementById('password').value = data.password;
                document.getElementById('createdBy').value = data.createdBy;
                // Add other fields as needed
                console.log(data);
            })
            .catch(error => console.error('Error:', error));
        document.getElementById('updateITReturnsForm').addEventListener('submit', function (event) {
            event.preventDefault();
            // Show confirmation popup
            document.getElementById('updatePopup').style.display = 'block';
        });
        document.getElementById('updateYesButton').addEventListener('click', function () {
            var serviceType = document.getElementById('serviceType').value;
            var registeredEmail = document.getElementById('registeredEmail').value;
            var registeredMobileNo = document.getElementById('registeredMobileNo').value;
            var registeredDate = document.getElementById('registeredDate').value;
            var loginUrl = document.getElementById('loginUrl').value;
            var userName = document.getElementById('userName').value;
            var password = document.getElementById('password').value;
            var createdBy = document.getElementById('createdBy').value;
            // Add other fields as needed
            fetch(`http://localhost:8090/api/itreturns/${customerId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    "serviceType": serviceType,
                    "registeredEmail": registeredEmail,
                    "registeredMobileNo": registeredMobileNo,
                    "registeredDate": registeredDate,
                    "loginUrl": loginUrl,
                    "userName": userName,
                    "password": password,
                    "createdBy": createdBy
                })
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Network response was not ok (${response.status})`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log(data.result);
                    var popup = document.getElementById('popup');
                    var popupMessage = document.getElementById('popupMessage');
                    var okButton = document.getElementById('okButton');
                    popup.style.backgroundColor = 'white'; // Green color for success
                    popupMessage.innerText = 'Data is updated successfully';
                    popup.style.display = 'flex';
                    okButton.addEventListener('click', function () {
                        window.location.href = 'itreturnsView.html'; // Redirect to itreturnsView.html
                    });
                })
                .catch(error => console.error('Error:', error));
            document.getElementById('updatePopup').style.display = 'none';
        });
        document.getElementById('updateNoButton').addEventListener('click', function () {
            // Hide the confirmation popup
            window.location.href = 'itreturnsView.html';
            document.getElementById('updatePopup').style.display = 'none';
        });
    });
</script>
</body>
</html>